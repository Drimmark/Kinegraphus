{% extends "layout.html" %}


{% block content %}


<style>
#showtimeimgs {
    width: 30%;
    height: 30%;
}
#showtimepelicula {
    width: 10%;
    height: 10%;
    
}
#showtimecine {
    width: 30%;
    height: 100%;
}
</style>

<section id="compra">
	<section id="butacas">
		<div id="salas">
		</div>
		
		<div id="pantalla"></div>

		<div id="leyendaSala">
			<i class="fa fa-circle rojo"></i> Ocupada
			<i class="fa fa-circle verde"></i> Libre
			<i class="fa fa-circle amarillo"></i> Seleccionada
		</div>
	</section>

	<section id="resumen">
		{{ showtime.cinema.name }}
		{{ showtime.movie.title }}
		{{ showtime.time }}
		<!-- se puede cambiar el span, pero que el id sea el mismo -->
		<span id="numButacas"> {{ number }} </span>

		<i id="showButacas" class="fa fa-plus-square"></i>

	</section>

<p><span id='showtimeimgs'><img id='showtimepelicula' src="//cine.entradas.com/entradas/contenidos/peliculas/{{ showtime.movie.cartel }}" alt="{{ showtime.movie.title }}" /> en
 <img id='showtimecine' src="https://maps.googleapis.com/maps/api/streetview?size=400x200&location={{ showtime.cinema.street }},{{ showtime.cinema.city }}" alt="{{ showtime.cinema.name }}" /></span></p>

</section>
{% endblock %}

{% block scripts %}
	<script>		
		var predef = {{ number }}; //NÃºmero de butacas aleatorias 
		var sala = {{ butacas }}; //Se elige aleatoriamente entre las salas posibles.
		sala = sala[parseInt(Math.random()*2)];
		for (i in sala) {
			for (k in sala[i]) {
				var butaca = Math.random()*10;
				var probab = 2*(Math.random()*5);
				if (butaca > probab) {
					if (predef != 0) {
						predef--;
						sala[i][k] = 2;
					} else {
						sala[i][k]=1;
					}
				}
			}
		}
	</script>

{{ super() }}
<script type="text/javascript" src="{{ url_for("static", filename="js/buy.js") }}"></script>
{% endblock %}
